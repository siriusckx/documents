## Shell中$的使用总结
### （一）常用变量说明
1. \$\$
   > Shell本身的PID
2. $!
   > Shell最后运行的后中Process的PID
3. $?
   > 最后运行的命令的结束代码（返回值）
4. $-
   > 使用set命令设定的Flag一览
5. $*
   > 所有参数列表。
6. $#
   > 添加到Shell的参数个数
7. $0
   > Shell本身的文件名
8. $1~$n
   > 添加到Shell的各参数值，$1是第1参数，$2是第2参数....

### (二) shell中$(())、$( )、``与${ }的区别
1. $()与``
   > 在bash中，$()与``（反引号）都是用来作命令替换的，命令替换与变量替换差不多，都是用来重组命令行的，先完成引号里的命令行，然后将其结果替换出来，再重组成新的命令行。
   ```
   echo today is $(date "+%Y-%m-%d")
   echo today is `date "+%Y-%m-%d"`
   ```
   > $()与``，在操作上，这两者都是达到相应的效果，``很容易与''搞混乱，尤其是对初学者来说，而$()比较直观。但$()的敝端是，并不是所有的类unix系统都支持这种方式，但反引号是肯定支持的。
2. \$var与\${var}
   > 一般情况下，\${ }用于变量替换，\$var与\${var}是没有区别的，但是用${var}会比较精确的界定变量名称的范围。
### (三)\$使用实例:取路径、文件名、后缀
> 先赋值一个变量为一个路径，如下：file=/dir1/dir2/dir3/my.file.txt

|命令|解释|结果|
|--|--|--|
|echo ${file#*/}|dir1/dir2/dir3/my.file.txt|去除第一个/及其左边的字符串|
|echo ${file##*/}|my.file.txt|去除最后一个/及其左边的字符串|
|echo ${file#*.}|file.txt|拿掉第一个 . 及其左边的字符串|
|echo ${file##*.}|txt|拿掉最后一个 . 及其左边的字符串|
|echo ${file%/*}|/dir1/dir2/dir3|合掉最后一条 / 及其右边的字符串|
|echo ${file%%/*}|空值|拿掉第一条 / 及其右边的字符串（空值）|
|echo ${file%.*}|/dir1/dir2/dir3/my.file|拿掉最后一个 . 及其右边的字符串|
|echo ${file%%.*}|/dir1/dir2/dir3/my|拿掉第一个点及其右边的字符串|
> 记忆方法如下：  
> \# 是去掉左边（在键盘上 # 在 $ 之左边）  
> \% 是去掉右边（在键盘上 % 在 $ 之右边）  
> 单一符号是最小匹配，两个符号是最大匹配
> \*是用来匹配不要的字符，也就是想要去掉的那部分
> 还有指定字符分隔号，与*配合，决定取哪部分

### (四)\$使用实例：取子串及替换
> 先赋值一个变量为一个路径，如下：file=/dir1/dir2/dir3/my.file.txt

|命令|结果|解释|
|--|--|--|
|echo ${file:0:5}|/dir1|提取最左边的5个字符|
|echo ${file:5:5}|/dir2|提取第 5 个字节右边的连续 5 个字节|
|echo ${file/dir/path}|/path1/dir2/dir3/my.file.txt|将第一个 dir 替换为 path|
|echo ${file//dir/path}|/dir1/dir2/dir3/my.file.txt|将全部 dir 替换为 path|
|echo ${#file}| 27 |获取变量长度|

### (五)\$使用实例：根据状态为变量赋值
|命令|解释|备注|
|--|--|--|
|${file-my.file.txt}|若$file 没设定，则使用my.file.txt作传回值|空值及非空值不作处理|
|${file:-my.file.txt}|若$file 没有设定或为空值,则使用my.file.txt作传回值|非空值不作处理|
|${file+my.file.txt}|若$file 设为空值或非空值，均使用my.file.txt作传回值|没设定时不作处理|
|${file:+my.file.txt}|若$file 为非空值，则使用my.file.txt作传回值|没设定及空值不作处理|
|${file=txt}|若\$file 没设定，则回传txt，并将$file 赋值为txt|空值及非空值不作处理|
|${file:=txt}|若$file没设定或空值，则回传txt，将$file赋值为txt|非空值不作处理|
|${file?my.file.txt}|若$file没设定，则my.file.txt输出至STDERR|空值及非空值不作处理|
|${file:?my.file.txt}|若$file没设定或空值，则将my.file.txt输出至STDERR|非空值不作处理|
> 以上的理解在于，一定要分清楚 unset 与 null 及 non-null 这三种赋值状态。一般而言， : 与null有关，若不带 : 的话，null不受影响，若带 : 则连 null 也受影响。

### （六）\$使用实例，数组的使用
> A="a b c def"     #定义字符串  
> A=(a b c def)     #定义字符数组

|命令|结果|解释|
|--|--|--|
|${A[@]}|a b c def|返回数组全部元素|
|${A[*]}|a b c def|同上|
|${A[0]}|a|返回数组第一个元素|
|${#A[@]}|4|返回数组元素总个数|
|${#A[*]}|4|同上|
|${#A[3]}|3|返回第4个元素的个数|
|A[3]=xyz|则是将第四个组数重新定义为xyz||

### (七)、\$(())的作用
1. 作整数运算（ + - * / % & | ^ ! ）
   ```
   echo $((2*3))
   a=5;b=7;c=2
   echo $((a+b*c))
   echo $(($a+$b*$c))  #括号内的$可要可不要
   ```
2. 作进制转换
   > echo $((N#xx)) ,N为进制，xx为该进制下某个数值，命令执行后可以得到该进制数转成十进制后的值
   ```
   echo $((2#110))
   echo $((16#2a))
   echo $((8#11))
   ```
### (八)、单独的(())的作用
   > 重定义变量值
   ```
   a=5;b=7
   ((a++))
   echo $a
   ((a--));echo $a
   ((a<b));echo $?
   ((a>b));echo $?
   ```

以上内容，引用自：

https://www.cnblogs.com/chengd/p/7803664.html